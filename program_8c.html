<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>uMIDI: /home/haggl/repositories/uMIDI/software/src/lib/program.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">uMIDI
   </div>
   <div id="projectbrief">The swiss army knife for quick and easy developement of MIDI applications.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_c8fa76d8dc1b9e06ff8aeb3121608b1b.html">software</a></li><li class="navelem"><a class="el" href="dir_0a6976b261bfea925410a9d3b510969e.html">src</a></li><li class="navelem"><a class="el" href="dir_85743a6d44e2a34b0cf5e56859c4c51a.html">lib</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">program.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Program storage module implementation.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;avr/eeprom.h&gt;</code><br />
<code>#include &lt;avr/wdt.h&gt;</code><br />
<code>#include &lt;util/delay.h&gt;</code><br />
<code>#include &quot;<a class="el" href="gpio_8h_source.html">gpio.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="program_8h_source.html">program.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for program.c:</div>
<div class="dyncontent">
<div class="center"><img src="program_8c__incl.png" border="0" usemap="#_2home_2haggl_2repositories_2uMIDI_2software_2src_2lib_2program_8c" alt=""/></div>
<map name="_2home_2haggl_2repositories_2uMIDI_2software_2src_2lib_2program_8c" id="_2home_2haggl_2repositories_2uMIDI_2software_2src_2lib_2program_8c">
<area shape="rect" id="node8" href="gpio_8h.html" title="GPIO configuration and service functions. " alt="" coords="603,109,661,136"/>
<area shape="rect" id="node12" href="program_8h.html" title="Program storage API. " alt="" coords="685,109,765,136"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ab205027e337947b622b2f9d83014f798"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="program_8c.html#ab205027e337947b622b2f9d83014f798">copy_current_bank_to</a> (uint8_t target_bank)</td></tr>
<tr class="memdesc:ab205027e337947b622b2f9d83014f798"><td class="mdescLeft">&#160;</td><td class="mdescRight">Copies all programs in the current bank to another bank.  <a href="#ab205027e337947b622b2f9d83014f798">More...</a><br /></td></tr>
<tr class="separator:ab205027e337947b622b2f9d83014f798"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ba941d0654d34892d771caa05411fc9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="program_8c.html#a6ba941d0654d34892d771caa05411fc9">copy_current_program_to</a> (uint8_t target_program)</td></tr>
<tr class="memdesc:a6ba941d0654d34892d771caa05411fc9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Copies the current program to the specified position in memory.  <a href="#a6ba941d0654d34892d771caa05411fc9">More...</a><br /></td></tr>
<tr class="separator:a6ba941d0654d34892d771caa05411fc9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f529b360fa465215192a0ca6910bbdd"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="program_8c.html#a7f529b360fa465215192a0ca6910bbdd">export_bank</a> (const uint8_t bank)</td></tr>
<tr class="memdesc:a7f529b360fa465215192a0ca6910bbdd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Exports a program bank.  <a href="#a7f529b360fa465215192a0ca6910bbdd">More...</a><br /></td></tr>
<tr class="separator:a7f529b360fa465215192a0ca6910bbdd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adac7511ca1a907abf09fb3aab4f22eeb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="program_8c.html#adac7511ca1a907abf09fb3aab4f22eeb">enter_program</a> (uint8_t number)</td></tr>
<tr class="memdesc:adac7511ca1a907abf09fb3aab4f22eeb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Loads and executes the specified program.  <a href="#adac7511ca1a907abf09fb3aab4f22eeb">More...</a><br /></td></tr>
<tr class="separator:adac7511ca1a907abf09fb3aab4f22eeb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a556a747c9130c20e684794db1df65dca"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="program_8c.html#a556a747c9130c20e684794db1df65dca">import_bank</a> (const uint8_t bank, const char *data)</td></tr>
<tr class="memdesc:a556a747c9130c20e684794db1df65dca"><td class="mdescLeft">&#160;</td><td class="mdescRight">Imports and stores a program bank given as a hex-string.  <a href="#a556a747c9130c20e684794db1df65dca">More...</a><br /></td></tr>
<tr class="separator:a556a747c9130c20e684794db1df65dca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab9d2cde46e9c0a6bcbda7f8b10b1fe3d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="program_8c.html#ab9d2cde46e9c0a6bcbda7f8b10b1fe3d">init_program_module</a> (uint32_t program_initializer_value, void(*const execute_program_callback)(uint32_t <a class="el" href="unionprogram__data.html">program_data</a>))</td></tr>
<tr class="memdesc:ab9d2cde46e9c0a6bcbda7f8b10b1fe3d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the program storage module.  <a href="#ab9d2cde46e9c0a6bcbda7f8b10b1fe3d">More...</a><br /></td></tr>
<tr class="separator:ab9d2cde46e9c0a6bcbda7f8b10b1fe3d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc56cf61f057bb5d0ac3a08bfef54fec"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="program_8c.html#acc56cf61f057bb5d0ac3a08bfef54fec">read_program_data</a> (uint8_t number)</td></tr>
<tr class="memdesc:acc56cf61f057bb5d0ac3a08bfef54fec"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads a program data word from the specified position in memory.  <a href="#acc56cf61f057bb5d0ac3a08bfef54fec">More...</a><br /></td></tr>
<tr class="separator:acc56cf61f057bb5d0ac3a08bfef54fec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a03c5f0e2347a4a813f844bd6f62ffeb7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="program_8c.html#a03c5f0e2347a4a813f844bd6f62ffeb7">update_current_program</a> (uint32_t <a class="el" href="unionprogram__data.html">program_data</a>)</td></tr>
<tr class="memdesc:a03c5f0e2347a4a813f844bd6f62ffeb7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates and stores the current program.  <a href="#a03c5f0e2347a4a813f844bd6f62ffeb7">More...</a><br /></td></tr>
<tr class="separator:a03c5f0e2347a4a813f844bd6f62ffeb7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23283a77ea4b32c1c3f2a1448a4b2772"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="program_8c.html#a23283a77ea4b32c1c3f2a1448a4b2772">wipe_current_bank</a> (void)</td></tr>
<tr class="memdesc:a23283a77ea4b32c1c3f2a1448a4b2772"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reinitializes all programs in the current bank.  <a href="#a23283a77ea4b32c1c3f2a1448a4b2772">More...</a><br /></td></tr>
<tr class="separator:a23283a77ea4b32c1c3f2a1448a4b2772"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af2f8613074a93fab7055b60a21faf135"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="program_8c.html#af2f8613074a93fab7055b60a21faf135">wipe_current_program</a> (void)</td></tr>
<tr class="memdesc:af2f8613074a93fab7055b60a21faf135"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reinitializes the currently loaded program.  <a href="#af2f8613074a93fab7055b60a21faf135">More...</a><br /></td></tr>
<tr class="separator:af2f8613074a93fab7055b60a21faf135"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a731c3c7ef1713465c299a23ac5371f91"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="program_8c.html#a731c3c7ef1713465c299a23ac5371f91">write_program</a> (uint8_t number, uint32_t data)</td></tr>
<tr class="memdesc:a731c3c7ef1713465c299a23ac5371f91"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stores a given program data word in the specified position in memory.  <a href="#a731c3c7ef1713465c299a23ac5371f91">More...</a><br /></td></tr>
<tr class="separator:a731c3c7ef1713465c299a23ac5371f91"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a635094f6bff9efc585273560de7d506c"><td class="memItemLeft" align="right" valign="top">static uint32_t program_data_storage[<a class="el" href="program_8h.html#a5574b652f173bfea8b31319decdc259a">PROGRAM_COUNT</a>]&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="program_8c.html#a635094f6bff9efc585273560de7d506c">EEMEM</a></td></tr>
<tr class="memdesc:a635094f6bff9efc585273560de7d506c"><td class="mdescLeft">&#160;</td><td class="mdescRight">EEPROM program storage.  <a href="#a635094f6bff9efc585273560de7d506c">More...</a><br /></td></tr>
<tr class="separator:a635094f6bff9efc585273560de7d506c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5749e93cd0d439e3382aacfc0a7bf1f5"><td class="memItemLeft" align="right" valign="top">static uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="program_8c.html#a5749e93cd0d439e3382aacfc0a7bf1f5">program_initializer</a></td></tr>
<tr class="memdesc:a5749e93cd0d439e3382aacfc0a7bf1f5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialization value for empty programs.  <a href="#a5749e93cd0d439e3382aacfc0a7bf1f5">More...</a><br /></td></tr>
<tr class="separator:a5749e93cd0d439e3382aacfc0a7bf1f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a939aaeea5bd33f58879a47a05f840240"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structprogram.html">program</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="program_8c.html#a939aaeea5bd33f58879a47a05f840240">current_program</a></td></tr>
<tr class="memdesc:a939aaeea5bd33f58879a47a05f840240"><td class="mdescLeft">&#160;</td><td class="mdescRight">Current program.  <a href="#a939aaeea5bd33f58879a47a05f840240">More...</a><br /></td></tr>
<tr class="separator:a939aaeea5bd33f58879a47a05f840240"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c7f5eea9cbc4ef1fd99b59262baaeec"><td class="memItemLeft" align="right" valign="top">static void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="program_8c.html#a5c7f5eea9cbc4ef1fd99b59262baaeec">execute_program</a> )(uint32_t)</td></tr>
<tr class="memdesc:a5c7f5eea9cbc4ef1fd99b59262baaeec"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback for program execution.  <a href="#a5c7f5eea9cbc4ef1fd99b59262baaeec">More...</a><br /></td></tr>
<tr class="separator:a5c7f5eea9cbc4ef1fd99b59262baaeec"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Program storage module implementation. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ab205027e337947b622b2f9d83014f798"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void copy_current_bank_to </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>target_bank</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Copies all programs in the current bank to another bank. </p>
<p>Irreversibly overwrites all programs in the target bank. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">target_bank</td><td>Target bank number [0..11]. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a6ba941d0654d34892d771caa05411fc9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void copy_current_program_to </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>target_program</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Copies the current program to the specified position in memory. </p>
<p>Irreversibly overwrites the target program. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">target_program</td><td>Target program number [0..119]. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="adac7511ca1a907abf09fb3aab4f22eeb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void enter_program </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>number</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Loads and executes the specified program. </p>
<p>Reads the new program data from EEPROM, updates the internal state and calls the registered callback function, which executes the program. If the specified program number is the same as the stored current program number, this function does nothing. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">number</td><td>Program number [0..119]. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="program_8h.html#a28e9a4c029f2e415ce6d462b2f9aa502" title="Initializes the program storage module. ">init_program_module</a> </dd></dl>

</div>
</div>
<a class="anchor" id="a7f529b360fa465215192a0ca6910bbdd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* export_bank </td>
          <td>(</td>
          <td class="paramtype">const uint8_t&#160;</td>
          <td class="paramname"><em>number</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Exports a program bank. </p>
<p>Reads the data from EEPROM and converts it to a string of hexadecimal digits. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">number</td><td>the number of the program bank to export </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the programs stored in EEPROM as a hex-string </dd></dl>

</div>
</div>
<a class="anchor" id="a556a747c9130c20e684794db1df65dca"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool import_bank </td>
          <td>(</td>
          <td class="paramtype">const uint8_t&#160;</td>
          <td class="paramname"><em>number</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Imports and stores a program bank given as a hex-string. </p>
<p>Overwrites stored program data! </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">number</td><td>the number of the program bank to import [0..11] </td></tr>
    <tr><td class="paramname">data</td><td>the program bank to store as a string of hexadecimal digits </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>true</code> if sanity checks passed </dd></dl>

</div>
</div>
<a class="anchor" id="ab9d2cde46e9c0a6bcbda7f8b10b1fe3d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void init_program_module </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>program_initializer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(*)(uint32_t <a class="el" href="unionprogram__data.html">program_data</a>)&#160;</td>
          <td class="paramname"><em>execute_program_callback</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes the program storage module. </p>
<p>Stores the specified program data initialization word, used in the wipe functions and registers the provided callback function, which is executed whenever the current program data word is updated either by wiping the program or loading a new one. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">program_initializer</td><td>On wiping, programs are initialized with this value. </td></tr>
    <tr><td class="paramname">execute_program_callback</td><td>Callback for program execution. This procedure is called with the program configuration data that was read from memory as the parameter <code><a class="el" href="unionprogram__data.html">program_data</a></code>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="program_8h.html#af2f8613074a93fab7055b60a21faf135" title="Reinitializes the currently loaded program. ">wipe_current_program</a> </dd>
<dd>
<a class="el" href="program_8h.html#adac7511ca1a907abf09fb3aab4f22eeb" title="Loads and executes the specified program. ">enter_program</a> </dd></dl>

</div>
</div>
<a class="anchor" id="acc56cf61f057bb5d0ac3a08bfef54fec"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t read_program_data </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>number</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads a program data word from the specified position in memory. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">number</td><td>Program number [0..119]. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a03c5f0e2347a4a813f844bd6f62ffeb7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void update_current_program </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>program_data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Updates and stores the current program. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname"><a class="el" href="unionprogram__data.html">program_data</a></td><td>the new configuration </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a23283a77ea4b32c1c3f2a1448a4b2772"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void wipe_current_bank </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reinitializes all programs in the current bank. </p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="program_8h.html#af2f8613074a93fab7055b60a21faf135" title="Reinitializes the currently loaded program. ">wipe_current_program</a> </dd></dl>

</div>
</div>
<a class="anchor" id="af2f8613074a93fab7055b60a21faf135"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void wipe_current_program </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reinitializes the currently loaded program. </p>
<p>Updates the internal program data word with the initializer, stores it and executes the initialized program. </p>

</div>
</div>
<a class="anchor" id="a731c3c7ef1713465c299a23ac5371f91"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void write_program </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>number</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stores a given program data word in the specified position in memory. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">number</td><td>Program number [0..119]. </td></tr>
    <tr><td class="paramname">data</td><td>Program data as 32-bit dword. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="a939aaeea5bd33f58879a47a05f840240"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structprogram.html">program</a> current_program</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Current program. </p>

</div>
</div>
<a class="anchor" id="a635094f6bff9efc585273560de7d506c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t program_data_storage [<a class="el" href="program_8h.html#a5574b652f173bfea8b31319decdc259a">PROGRAM_COUNT</a>] EEMEM</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>EEPROM program storage. </p>

</div>
</div>
<a class="anchor" id="a5c7f5eea9cbc4ef1fd99b59262baaeec"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void(* execute_program) (uint32_t)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Callback for program execution. </p>

</div>
</div>
<a class="anchor" id="a5749e93cd0d439e3382aacfc0a7bf1f5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t program_initializer</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Initialization value for empty programs. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Jun 26 2016 21:08:51 for uMIDI by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
