<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>uMIDI: /home/haggl/repositories/uMIDI/software/src/lib/background_tasks.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">uMIDI
   </div>
   <div id="projectbrief">The swiss army knife for quick and easy developement of MIDI applications.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.1.2 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_0c220628bbfaf3735973080788410777.html">software</a></li><li class="navelem"><a class="el" href="dir_ddb5b8313525979f923a1027f5d71067.html">src</a></li><li class="navelem"><a class="el" href="dir_8127d9c81ca9341e0d8644565402ee47.html">lib</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">background_tasks.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Background task scheduler.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdint.h&gt;</code><br/>
</div><div class="textblock"><div class="dynheader">
Include dependency graph for background_tasks.h:</div>
<div class="dyncontent">
<div class="center"><img src="background__tasks_8h__incl.png" border="0" usemap="#_2home_2haggl_2repositories_2uMIDI_2software_2src_2lib_2background__tasks_8h" alt=""/></div>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="background__tasks_8h__dep__incl.png" border="0" usemap="#_2home_2haggl_2repositories_2uMIDI_2software_2src_2lib_2background__tasks_8hdep" alt=""/></div>
<map name="_2home_2haggl_2repositories_2uMIDI_2software_2src_2lib_2background__tasks_8hdep" id="_2home_2haggl_2repositories_2uMIDI_2software_2src_2lib_2background__tasks_8hdep">
<area shape="rect" id="node3" href="background__tasks_8c.html" title="Background task scheduler." alt="" coords="5,117,168,181"/><area shape="rect" id="node5" href="serial__communication_8c.html" title="Implementation of the serial communication module." alt="" coords="192,117,355,181"/><area shape="rect" id="node7" href="tests_8c.html" title="/home/haggl/repositories\l/uMIDI/software/src/lib\l/tests.c" alt="" coords="379,117,541,181"/><area shape="rect" id="node9" href="wave_8c.html" title="Waveform function generator." alt="" coords="565,126,765,173"/></map>
</div>
</div>
<p><a href="background__tasks_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:aca12ec03d86eb5ef061e7a94b02b0ac0"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="background__tasks_8h.html#aca12ec03d86eb5ef061e7a94b02b0ac0">F_TIMER</a>&#160;&#160;&#160;20000</td></tr>
<tr class="memdesc:aca12ec03d86eb5ef061e7a94b02b0ac0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Frequency of the CPU timer used in by the task scheduler in [Hz].  <a href="#aca12ec03d86eb5ef061e7a94b02b0ac0"></a><br/></td></tr>
<tr class="memitem:a0ccb08d3b903865a450dc2b4633d2d97"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="background__tasks_8h.html#a0ccb08d3b903865a450dc2b4633d2d97">F_TASK_FAST</a>&#160;&#160;&#160;<a class="el" href="background__tasks_8h.html#aca12ec03d86eb5ef061e7a94b02b0ac0">F_TIMER</a></td></tr>
<tr class="memdesc:a0ccb08d3b903865a450dc2b4633d2d97"><td class="mdescLeft">&#160;</td><td class="mdescRight">High priority task frequency in [Hz].  <a href="#a0ccb08d3b903865a450dc2b4633d2d97"></a><br/></td></tr>
<tr class="memitem:aadd0736a68458905fa7bca00d7f5f9be"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="background__tasks_8h.html#aadd0736a68458905fa7bca00d7f5f9be">F_TASK_MID</a>&#160;&#160;&#160;(<a class="el" href="background__tasks_8h.html#a0ccb08d3b903865a450dc2b4633d2d97">F_TASK_FAST</a> / 20)</td></tr>
<tr class="memdesc:aadd0736a68458905fa7bca00d7f5f9be"><td class="mdescLeft">&#160;</td><td class="mdescRight">Medium priority task frequency in [Hz].  <a href="#aadd0736a68458905fa7bca00d7f5f9be"></a><br/></td></tr>
<tr class="memitem:a6cf2a4ef4c846f63e307f38c33bb5e30"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="background__tasks_8h.html#a6cf2a4ef4c846f63e307f38c33bb5e30">F_TASK_SLOW</a>&#160;&#160;&#160;(<a class="el" href="background__tasks_8h.html#aadd0736a68458905fa7bca00d7f5f9be">F_TASK_MID</a> / 10)</td></tr>
<tr class="memdesc:a6cf2a4ef4c846f63e307f38c33bb5e30"><td class="mdescLeft">&#160;</td><td class="mdescRight">Low priority task frequency in [Hz].  <a href="#a6cf2a4ef4c846f63e307f38c33bb5e30"></a><br/></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a8f9495d3b765304a694cc67caf1cebaa"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="background__tasks_8h.html#a8f9495d3b765304a694cc67caf1cebaa">background_task_t</a> )(void)</td></tr>
<tr class="memdesc:a8f9495d3b765304a694cc67caf1cebaa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Data type for background task pointers.  <a href="#a8f9495d3b765304a694cc67caf1cebaa"></a><br/></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a59b8f1c0605d7525987674f81ac7669b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="background__tasks_8h.html#a59b8f1c0605d7525987674f81ac7669b">process_background_tasks</a> (void)</td></tr>
<tr class="memdesc:a59b8f1c0605d7525987674f81ac7669b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Invokes registered background tasks if certain conditions are met.  <a href="#a59b8f1c0605d7525987674f81ac7669b"></a><br/></td></tr>
<tr class="memitem:a100bceea6009951a25008a187393605c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="background__tasks_8h.html#a100bceea6009951a25008a187393605c">init_background_tasks</a> (<a class="el" href="background__tasks_8h.html#a8f9495d3b765304a694cc67caf1cebaa">background_task_t</a> high_freq_tasks[], uint8_t high_freq_tasks_size, <a class="el" href="background__tasks_8h.html#a8f9495d3b765304a694cc67caf1cebaa">background_task_t</a> mid_freq_tasks[], uint8_t mid_freq_tasks_size, <a class="el" href="background__tasks_8h.html#a8f9495d3b765304a694cc67caf1cebaa">background_task_t</a> low_freq_tasks[], uint8_t low_freq_tasks_size)</td></tr>
<tr class="memdesc:a100bceea6009951a25008a187393605c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the background task scheduler.  <a href="#a100bceea6009951a25008a187393605c"></a><br/></td></tr>
</table>
<a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Background task scheduler. </p>
</div><h2>Macro Definition Documentation</h2>
<a class="anchor" id="a0ccb08d3b903865a450dc2b4633d2d97"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define F_TASK_FAST&#160;&#160;&#160;<a class="el" href="background__tasks_8h.html#aca12ec03d86eb5ef061e7a94b02b0ac0">F_TIMER</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>High priority task frequency in [Hz]. </p>

</div>
</div>
<a class="anchor" id="aadd0736a68458905fa7bca00d7f5f9be"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define F_TASK_MID&#160;&#160;&#160;(<a class="el" href="background__tasks_8h.html#a0ccb08d3b903865a450dc2b4633d2d97">F_TASK_FAST</a> / 20)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Medium priority task frequency in [Hz]. </p>

</div>
</div>
<a class="anchor" id="a6cf2a4ef4c846f63e307f38c33bb5e30"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define F_TASK_SLOW&#160;&#160;&#160;(<a class="el" href="background__tasks_8h.html#aadd0736a68458905fa7bca00d7f5f9be">F_TASK_MID</a> / 10)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Low priority task frequency in [Hz]. </p>

</div>
</div>
<a class="anchor" id="aca12ec03d86eb5ef061e7a94b02b0ac0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define F_TIMER&#160;&#160;&#160;20000</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Frequency of the CPU timer used in by the task scheduler in [Hz]. </p>

</div>
</div>
<h2>Typedef Documentation</h2>
<a class="anchor" id="a8f9495d3b765304a694cc67caf1cebaa"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* background_task_t)(void)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Data type for background task pointers. </p>

</div>
</div>
<h2>Function Documentation</h2>
<a class="anchor" id="a100bceea6009951a25008a187393605c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void init_background_tasks </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="background__tasks_8h.html#a8f9495d3b765304a694cc67caf1cebaa">background_task_t</a>&#160;</td>
          <td class="paramname"><em>high_freq_tasks</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>high_freq_tasks_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="background__tasks_8h.html#a8f9495d3b765304a694cc67caf1cebaa">background_task_t</a>&#160;</td>
          <td class="paramname"><em>mid_freq_tasks</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>mid_freq_tasks_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="background__tasks_8h.html#a8f9495d3b765304a694cc67caf1cebaa">background_task_t</a>&#160;</td>
          <td class="paramname"><em>low_freq_tasks</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>low_freq_tasks_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes the background task scheduler. </p>
<p>Configures CPU timer 0 to provide the main clock for the background task scheduler and registers the tasks to be invoked cyclically. The tasks are grouped into three levels of priority. High priority tasks are executed more frequently. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">high_freq_tasks</td><td>an array of function pointers to high frequency tasks </td></tr>
    <tr><td class="paramname">high_freq_tasks_size</td><td>number of high frequency tasks </td></tr>
    <tr><td class="paramname">mid_freq_tasks</td><td>an array of function pointers to medium frequency tasks </td></tr>
    <tr><td class="paramname">mid_freq_tasks_size</td><td>number of medium frequency tasks </td></tr>
    <tr><td class="paramname">low_freq_tasks</td><td>an array of function pointers to low frequency tasks </td></tr>
    <tr><td class="paramname">low_freq_tasks_size</td><td>number of low frequency tasks </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="background__tasks_8h.html#a0ccb08d3b903865a450dc2b4633d2d97" title="High priority task frequency in [Hz].">F_TASK_FAST</a> </dd>
<dd>
<a class="el" href="background__tasks_8h.html#aadd0736a68458905fa7bca00d7f5f9be" title="Medium priority task frequency in [Hz].">F_TASK_MID</a> </dd>
<dd>
<a class="el" href="background__tasks_8h.html#a6cf2a4ef4c846f63e307f38c33bb5e30" title="Low priority task frequency in [Hz].">F_TASK_SLOW</a> </dd></dl>

</div>
</div>
<a class="anchor" id="a59b8f1c0605d7525987674f81ac7669b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void process_background_tasks </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Invokes registered background tasks if certain conditions are met. </p>
<p>This procedure must be called in the main loop of the program. If the CPU timer interrupt flag of CPU timer 0 is active, it is reset and the prescaler counters are incremented. If one of the prescalers reaches its target value, it is reset as well and the corresponding tasks are executed one by one. </p>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="background__tasks_8h.html#a0ccb08d3b903865a450dc2b4633d2d97" title="High priority task frequency in [Hz].">F_TASK_FAST</a> </dd>
<dd>
<a class="el" href="background__tasks_8h.html#aadd0736a68458905fa7bca00d7f5f9be" title="Medium priority task frequency in [Hz].">F_TASK_MID</a> </dd>
<dd>
<a class="el" href="background__tasks_8h.html#a6cf2a4ef4c846f63e307f38c33bb5e30" title="Low priority task frequency in [Hz].">F_TASK_SLOW</a> </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sat Mar 26 2016 22:23:14 for uMIDI by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.1.2
</small></address>
</body>
</html>
